<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ›’ Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚</title>
    <link rel="stylesheet" href="../css/style2.css"> 
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>

    <header class="Navbar">
        <h1>ğŸ›’ Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h1>
    </header>

    <div class="cart">
        <div id="cart-items">
            
        </div>
        <h3>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„ÙƒÙ„ÙŠ: $<span id="total-price">0</span> </h3>
        <button onclick="proceedToPayment()">  ! Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø§Ù† </button> <!-- Ø§Ù„Ø²Ø± Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ -->
    </div>

    <script>
        let cart = JSON.parse(localStorage.getItem("cart")) || [];

        function displayCart() {
            let cartItemsContainer = document.getElementById("cart-items");
            let totalPrice = 0;
            cartItemsContainer.innerHTML = ""; // ØªÙØ±ÙŠØº Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø³Ø§Ø¨Ù‚

            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p class ="empty"> ! Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ© </p>';
                document.getElementById("total-price").innerText = "0";
                return;
            }

            cart.forEach((item, index) => {
                let itemTotal = item.price * item.quantity; // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ù„ÙƒÙ„ Ù…Ù†ØªØ¬
                totalPrice += itemTotal; // Ø¬Ù…Ø¹ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ
                cartItemsContainer.innerHTML += `
                    <div class="cart-item">
                        <img src="${item.image}" alt="${item.name}">
                        <p>  ${item.name}  |  Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ : $ ${itemTotal}  |  Ø§Ù„Ø³Ø¹Ø± : ${item.price} $  |  Ø§Ù„ÙƒÙ…ÙŠØ© :  ${item.quantity}  </p>
                        <button onclick="removeItem(${index})"> Ø§Ø²Ø§Ù„Ø©</button>
                    </div>
                `;
            });

            document.getElementById("total-price").innerText = totalPrice;
        }

        function removeItem(index) {
            cart.splice(index, 1);
            localStorage.setItem("cart", JSON.stringify(cart));
            displayCart();
        }
        function clearCart() {
    localStorage.removeItem("cart");
   
    window.location.href = 'payment_delivery.html';  
}

        function proceedToPayment() {
            if (cart.length === 0) {
                alert(" Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©! ÙŠØ±Ø¬Ù‰ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ù‚Ø¨Ù„ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨.");
            } else {
            
                clearCart();  
    
                window.location.href = "payment_delivery.html"; 
            }
        }

        displayCart();
    </script>
     <script>
        if (localStorage.getItem("isLoggedIn") !== "true") {
          window.location.href = "login.html";
        }
      </script>

</body>
</html>


